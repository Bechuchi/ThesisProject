@model ThesisProject.ViewModels.CourseViewModel

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.ajax.unobtrusive/3.2.4/jquery.unobtrusive-ajax.min.js"></script>

@{
    ViewData["Title"] = "Home Page";
}

<h1 style="font-weight: bold">@Model.Name</h1>

@* TODO: Add colors and buttons for modules *@
@*<nav>
    @foreach (var module in Model.Modules)
    {
        if (module.Status == "TODO")
        {
            <button class="btn btn-danger disabled">@module.Name</button>
        }
        else if (module.Status == "In progress")
        {
            <button class="btn btn-warning active">@module.Name</button>
        }
        else
        {
            <button class="btn btn-success disabled">@module.Name</button>
        }
    }
</nav>
<br />*@

<div id="wrapper" style="overflow: hidden">
    <div id="accordion" style="float: left">
        @foreach (var module in Model.Modules)
        {
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>
                        <a href="#@module.Id" data-toggle="collapse" data-parent="#accordion">@module.Id @module.Name</a>
                    </h4>
                </div>
                <div id="@module.Id" class="panel-collapse collapse">
                    <div class="panel-body">
                        <h6>
                            @* TODO: Remove hard coding *@
                            <a onclick="openModuleDetails(@module.Id)">Facts</a>
                        </h6>
                        <h6>
                            <a onclick="openModuleDetails(@module.Id)">Exercises</a>
                        </h6>
                        <h6>
                            @*<a onclick="openModuleDetails(@module.Id)">Exams</a>*@
                            @Html.ActionLink("Exams", "pdf")
                        </h6>
                    </div>
                </div>
            </div>
        }
    </div>
    <div id="currentModule" style="float:right; width: 650px">

    </div>
</div>


@* TODO: object as in param, not id *@
<script>

    function openModuleDetails(id) {

        var element = document.getElementById("currentModule");

        //var content = content;
        var id = id;
        var sendData = { id: id }

        $.ajax({
            type: "POST",
            url: "@Url.Action("Details", "Modules")",
            data: sendData,
            success: function (data) {
                element.innerHTML = data
            },
            traditional: true
        });
    }
</script>
